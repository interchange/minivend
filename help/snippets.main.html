<html>
<head>
   <title>Tallyman Help: Snippets</title>

</head>
<body bgcolor="#ffffff" link="#7079aa" alink="#000000" vlink="#999999" >


<style type="text/css">
<!--
A:link {text-decoration: none} 
A:visited {text-decoration: none} 
A:active {text-decoration: none}
A:hover {color:#000000; text-decoration: none}
-->
</style>

<form>
<table width='100%' border=0 cellspacing=0 cellpadding=0><tr><td height=23 bgcolor="#e8a317" background="images/help.background.gif" valign=middle><table width='100%' cols=3 border=0 cellpadding=0 cellspacing=0><tr><td height=1 width=12 align=left valign=middle><img src='images/curve.left.help.gif' width=12 height=22></td><td valign=middle width=550><img src="images/cleardot.gif" height=1height=1 width=12><a href="main.html"><font face="Verdana, Arial, Helvetica, sans-serif" size=2>Home</font></a><img src="images/cleardot.gif" height=1 width=12><a href="faq.html"><font face="Verdana, Arial, Helvetica, sans-serif" size=2>FAQ</font></a><img src="images/cleardot.gif" height=1 width=12</td><td align=right valign=middle width=40><a href='help' target="Help" onclick='return ShowHelp()' onmouseover="window.status='Help';return true;" onmouseout="window.status='';return true;"><font face="Verdana, Arial, Helvetica, sans-serif" size=2>Back</font></a></td><td width=19 align=right valign=middle><img src="images/curve.right.help.gif" width=12 height=22 border=0></td></tr></table></td></tr></table>
</form>

<center>
<table border=0 cellspacing=0 cellpadding=2 width="450">

<tr>
<td>
<br>
<font size="-1" face="Verdana,Arial,Helvetica,sans-serif"><b>Snippets</b></font> <br>
<br>
<hr noshade size=2 width=100%>
<br>
<pre>
snippets.txt
Copyright 1999 akopia, inc.

*Introduction

This document describes the snippet and snippet type tables for items,
pages and groups.

The snippet system effectively provides a way to for things to have
varying numbers of fields.  sniptypes allow these fields to be named.
Thingtypes provide names for sets of sniptypes, and are documented
separately. 

*Data layout

The following tables in the database maintain association between
items and their snippets.  Pages and groups each have a similarly
named set of tables to associate them with their own snippets.  The
following description of the "item" tables is prototypical for "page"
and "group".  The only deviation from the pattern is the table for
groups, called "group_table" instead of simply "group" because "group"
is a reserved word in SQL.


  item         itemsniptype
   ^                 ^
                   /
                  /
      --itemsnip--
       

itemsniptype provides a way to describe types of snippets.  Eg.,
itemsniptype "hand" describes all snippets of that type as having a
default value of "left", residing in the local itemsnip table, and
suggests that a radio button be displayed when the user edits that
field.  

item should be documented elsewhere, as it is in a different
conceptual part of milton.  It provides the universal attributes and
notion of an item.  

itemsnip contains all the locally defined snippets for all the items
in the database.  All item snippets are associated with exactly one
itemsniptype and item.  The actual value of a snippet is currently
implemented as a variable length string with maximum length of 4000.

**Examples:

***Example 1, a simple example

 --- item ---
 item_id|label    |stock_id|mix_id
 -------+---------+--------+------
    1042|MegaWedge|    1042|     0
    1043| MegaWood|    1043|     0
    1044| MegaIron|    1044|     0


 --- itemsniptype ---
sniptype_id:  1000
index_name:   hand
label:        handedness of the club
defaultval:   left
accessmethod: local
widgettype:   3
widgetinfo:   (left, right)

sniptype_id:  1001
index_name:   color
label:        color of the club
defaultval:   red
accessmethod: local
widgettype:   2
widgetinfo:   (red, green, blue)


 --- itemsnip ---
 container_id|snip_id|sniptype_id|text   
 ------------+-------+-----------+-------
         1042|   1100|       1000|right
         1042|   1101|       1001|green
         1043|   1102|       1001|blue
         1043|   1103|       1000|left
         1044|   1104|       1001|red
         1044|   1105|       1000|left

In this example, we have three items, "MegaWedge", "MegaIron" and
"MegaWood".  We'll say that they're of thingtype "golf club", but
you'll have to read thingtype documentation if you want to know all
about that.  There are two snippets associated with each item, one of
sniptype number 1000 and one of sniptype number 1001.  Checking the
itemsniptype table, we find that these snippet types are labelled
"hand" and "color", respectively.  Additionally we see that the "hand"
sniptype has widgettype 3, which is recognized by the library as being
a radio button.  The widgetinfo tells us that the possible values are
"left" and "right".  Thus, we would see something akin to this when
editing the handedness of a golf club:

   handedness of the club:
        <*> left
        < > right

Similarly, "color" has widgettype 2, corresponding to a selection box,
and its possible values are "red", "green" and "blue". 


------------------------------

***Example 2, a more complicated example

 --- item ---
 item_id|label             |stock_id|mix_id
 -------+------------------+--------+------
    1042|         MegaWedge|    1042|     0
    1043|          MegaWood|    1043|     0
    1044|          MegaIron|    1044|     0
    1045|   Chopin Preludes|    1046|     0
    1046|            Elijah|    1047|     0


 --- itemsniptype ---
sniptype_id:  1000
index_name:   hand
label:        handedness of the club
defaultval:   left
accessmethod: local
widgettype:   3
widgetinfo:   (left, right)

sniptype_id:  1001
index_name:   color
label:        color of the club
defaultval:   red
accessmethod: local
widgettype:   2
widgetinfo:   (red, green, blue)

sniptype_id:  1002
index_name:   composer
label:        Album's composer
defaultval:   
accessmethod: local
widgettype:   0
widgetinfo:   

sniptype_id:  1003
index_name:   tracks
label:        number of tracks
defaultval:   0
accessmethod: cddb
widgettype:   7
widgetinfo:   

sniptype_id:  1004
index_name:   bargain
label:        Bargain CD
defaultval:   0
accessmethod: local
widgettype:   1
widgetinfo:   



 --- itemsnip ---
 container_id|snip_id|sniptype_id|text   
 ------------+-------+-----------+-------
         1042|   1100|       1000|right
         1042|   1101|       1001|green
         1043|   1102|       1001|blue
         1043|   1103|       1000|left
         1044|   1104|       1001|red
         1044|   1105|       1000|left
         1045|   1106|       1001|blue
         1045|   1107|       1002|Frederic Chopin
         1045|   1108|       1004|0
         1046|   1109|       1001|red
         1046|   1110|       1002|Felix Mendelssohn
         1046|   1111|       1004|1


This example adds two items, "Chopin Preludes" and "Elijah".  They
probably have thingtype "audio CD".  In the local snippet table, they
each have "color" (same itemsniptype used for the golf clubs),
"composer" and "bargain" fields.  composer has widgettype 0, which is
for normal textual fields.  bargain is type 1, which is for
checkboxes.

Note the "tracks" sniptype.  It has widgettype 7, which is for hidden
fields (ie, fields that are not to be displayed for editing).  Also
note that the accessmethod is not local, but cddb.  cddb would be a
user defined function which would perform the basic operations
provided by the itemsnip table, allowing the number of tracks to be
determined, for instance, by querying a CDDB database on the
internet.  Thus there are no snippets of this type in itemsnip.  See
the API documentation below for more information on user defined
access methods.


-----------------
*SNIPPET API

</pre> <br>
<br>

<hr noshade size=2 width=100%>
<font face="Verdana, Arial, Helvetica, sans-serif" size="1">
<a href="http://www.tallyman.com"><b>Tallyman</b></a><a href="http://www.akopia.com"><b> - ©1999 Akopia, Inc.</b></a></font>

</td>
</tr>
</table>
</body>
</html>

