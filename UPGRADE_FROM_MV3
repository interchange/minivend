Upgrading from Minivend 3 to Interchange
----------------------------------------

There were big changes from Minivend 3 to Minivend 4, some of which were
incompatible. 

Many things were removed as redundant, deprecated, or just plain 
crufty:

* All frame features removed, frames are managed by the user in HTML.

* Tags removed:

buttonbar       Replace with Variable.
random          Replace with [ad random=1] or custom code
rotate          Replace with [ad ...]
help            No replacement, use data functions or variables.
body            Replace with templates
finish_order    No replacement, use [if items]Message[/if]
last_page       No replacement, never worked
item-link       No replacement, just use [page [item-code]]
loop-link       No replacement, just use [page [loop-code]]
sql-link        No replacement, just use [page [sql-code]]
accessories     Replace with normal data functions

* Compatibility routines for many popular tags like [random], [rotate], etc.
are provided in the compat/ directory. To use, include the files in minivend.cfg:

    #include compat/*

* Directives removed:

    ActionMap
    AdminDatabase
    AdminPage
    AsciiBackend
    BackendOrder
    ButtonBars
    CheckoutFrame
    CheckoutPage
    CollectData
    DataDir
    Delimiter
    DescriptionTrim
    FieldDelimiter
    FrameFlyPage
    FrameLinkDir
    FrameOrderPage
    FrameSearchPage
    ItemLinkDir
    ItemLinkValue
    MsqlDB
    MsqlProducts
    Mv_AlinkColor
    Mv_Background
    Mv_BgColor
    Mv_LinkColor
    Mv_TextColor
    Mv_VlinkColor
    NewReport
    NewTags
    OldShipping
    OrderFrame
    PageCache
    PriceDatabase
    Random
    ReceiptPage
    RecordDelimiter
    ReportIgnore
    Rotate
    SearchFrame
    SearchOverMsg
    SecureOrderMsg
    SpecialFile
    SubArgs
    Tracking

* Minor operations removed:

    - auto-substitution of mp= on [loop search=profile],
      [search-region arg=profile]
    - [tag scan]...
    - [tag sql]...

Many of these are related to one of:

    * Removal of frames logic
    * Removed tags
    * Obsolete methods
    * Old routines for 2.0x compatibility

----------------------------
UPGRADING from MiniVend 3

* Search lists:

Must now be surrounded by [search-region] [/search-region].

REASON: Multiple searches can be done in a page, with multiple [more-list]
entries, multiple [no-match] areas, etc. It was not really possible to
avoid this and add the feature.

This is the first thing you should do. To find all files containing the
search list, do:

	find pages -type f | xargs grep -l '\[search.list'

That will yield a set of files that need to be updated. You should surround
all parts of the search area, i.e.:

	[search-region]

	[search-list]
		your search iteration stuff, [item-code], etc.
	[/search-list]

	[more-list]
		[more]
	[/more-list]

	[/search-region]

* Search conditionals should now say [if-item-field field] [/if-item-field]
and [if-item-data table column] [/if-item-data].

REASON: Allows mixing and nesting of lists.

You may find that the old works in some situations, but it will not work
in all situations.

* Form Data updates:

Added Scratch variable mv_data_enable to gate the update_data 
function. You must set it before doing a form update.

REASON: Prior to this it was possible to update a SQL database willy-nilly. 

This will work in the short term:

	[set update_database]
	[set mv_data_enable]1[/set]
	[/set]
	<INPUT TYPE=hidden NAME=mv_click VALUE=update_database>

It will ensure at least that the user loads one form from you for each
update. For best security, gate with a UserDB entry.
