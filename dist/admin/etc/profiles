__NAME__                            invalid
&fatal     = yes
mv_failpage= interact
&set       = mv_junk 0
__END__

__NAME__    wizard
[if type=data
	term="wizard::fail_message::[value from_page]"
]
[set name=fail_message interpolate=1]
[data
	table=wizard
	field=fail_message
	key="[value from_page]"
]
[/set]
[/if]

[if
	type=data
	term="wizard::fail_page::[value from_page]"
]
&set=mv_failpage [data
					table=wizard
					field=fail_page
					key="[value from_page]"
				  ]
[else]
&set=mv_failpage failed
[/else]
[/if]

[if value mv_submit =~ /Next|Restart|Reconfig/]
[then]
[set name=next_branch interpolate=1][value from_page][/set]
[set name=back_branch interpolate=1][/set]
[set name=cancel_branch interpolate=1][/set]
[set name=default_branch interpolate=1][/set]
[loop
	arg="[data
			table=wizard
			field=required
			key='[value from_page]'
		  ]"
]
[loop-code]=required
[/loop]

[loop
	arg="[data
			table=wizard
			field=mandatory
			key='[value from_page]'
		]"
]
[loop-code]=mandatory
[/loop]

&fatal=yes

[if type=data term="wizard::subroutine::[value from_page]" op="=~" comp="/\S/"]
&set = Mv_result [data
					table=wizard
					field=subroutine
					key="[value from_page]"
					interpolate=1
				]
[/if]
&set=mv_successpage [data table=wizard field=next_page key="[value from_page]"]
[/then]
[elsif value mv_submit =~ /Cancel/]
[set name=next_branch interpolate=1][/set]
[set name=back_branch interpolate=1][/set]
[set name=cancel_branch interpolate=1][value from_page][/set]
[set name=default_branch interpolate=1][/set]
&set=mv_successpage cancel
[/elsif]
[elsif value mv_submit =~ /Back/]
[set name=next_branch interpolate=1][/set]
[set name=back_branch interpolate=1][value from_page][/set]
[set name=cancel_branch interpolate=1][/set]
[set name=default_branch interpolate=1][/set]
&set=mv_successpage [data table=wizard field=back_page key="[value from_page]"]
[/elsif]
[else]
[set name=next_branch interpolate=1][/set]
[set name=back_branch interpolate=1][/set]
[set name=default_branch interpolate=1][value from_page][/set]
[set name=cancel_branch interpolate=1][/set]
&set=mv_successpage cancel
[/else]
[/if]
[set name=save_submit interpolate=1][value mv_submit][/set]
[value name=mv_submit set=""]

__END__
