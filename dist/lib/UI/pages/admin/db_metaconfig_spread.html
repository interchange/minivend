[set table_perms]mv_metadata[/set]
[tmp page_title]
	Configure spreadsheet display: [cgi ui_table]
	[if cgi ui_view]
	[tmp tmp_dbcode][cgi ui_view]::[cgi ui_table][/tmp]
		(view [cgi ui_view])
	[else]
	[tmp tmp_dbcode][cgi ui_table][/tmp]
	[/else]
	[/if]
[/tmp]
[set ui_class]Admin[/set]
@_UI_STD_HEAD_@

[if !cgi ui_table]
	[calc]
		my ($view, $table) = split /:+/, $CGI->{code}, 2;
		($table = $view, $view = '')
			if ! $table;
		$Scratch->{tmp_bpage} = $Tag->area( {
									href => '__UI_BASE__/flex_select', 
									form => qq{
										mv_data_table=$table
										ui_meta_view=$view
									}, 
								});
#Debug("bounce page: $Scratch->{tmp_bpage}");
		return;
	[/calc]
	[bounce href="[scratchd tmp_bpage]"]
[/if]

<blockquote>
[page href=__UI_BASE__/db_metaconfig_select
		form="
			ui_table=[cgi ui_table]
			ui_view=[cgi ui_view]
		"]Configure Select Page</A><BR>
[page href=__UI_BASE__/db_metaconfig_edit
		form="
			ui_table=[cgi ui_table]
			ui_view=[cgi ui_view]
		"]Configure Edit Page</A><BR>
[page href=__UI_BASE__/db_metaconfig
		form="
			ui_table=[cgi ui_table]
			ui_view=[cgi ui_view]
		"]Configure All</A><br>
</blockquote>

[table-editor
	table=mv_metadata
	view=dbconfig
	table-width="90%"

	key="[scratch tmp_dbcode]"

	ui_display_only=name
	ui_data_fields="
		code
		name

		=Spreadsheet page display

		extended.spread_fields
		extended.spread_meta
		extended.spread_height
		extended.spread_width
		extended.spread_textarea
		extended.spread_textarea_rows
	"

	label=`{
		code							=> 'View::Table',
		name							=> 'Description',
		'extended.spread_fields'		=> 'Fields to edit',
		'extended.spread_meta'			=> 'Fields to meta display',
		'extended.spread_textarea'		=> 'Fields for textarea display',
		'extended.spread_height'		=> 'Number of rows',
		'extended.spread_width'			=> 'Column width',
		'extended.spread_textarea_rows' => 'Rows in a textarea',
	}`

	filter=`{
		'extended.spread_meta' => 'null_to_space',
	}`
	widget=`{
		code							=> 'hidden_text',
		name							=> 'value',
		height							=> 'text_5',
		'extended.spread_fields'		=> 'move_combo_8',
		'extended.spread_meta'			=> 'checkbox_left_4',
		'extended.spread_textarea'		=> 'checkbox_left_4',
		'extended.spread_height'		=> 'text_5',
		'extended.spread_width'			=> 'text_5',
		'extended.spread_textarea_rows' => 'text_5',
	}`

	database=`{
		'extended.spread_fields'		=> $CGI->{ui_table},
		'extended.spread_meta'			=> $CGI->{ui_table},
		'extended.spread_textarea'		=> $CGI->{ui_table},
	}`

	height=`{
		'extended.spread_fields'		=> 8,
	}`

	options=`{
		'extended.spread_fields'		=> 'columns',
		'extended.spread_meta'			=> 'columns',
		'extended.spread_textarea'		=> 'columns',
	}`

]
@_UI_STD_FOOTER_@
<!-- page: @@MV_PAGE@@ -->
