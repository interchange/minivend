[set page_title]Static site generation[/set]
[set page_perm]regen[/set]
[set help_name]regen.main[/set]
[set icon_name]admin/icon_config.gif[/set]

<!-- ----- BEGIN REAL STUFF ----- -->

@_UI_STD_HEAD_@
<!-- ----- BEGIN REAL STUFF ----- -->
<form action="[area __UI_BASE__/regen]" method="GET">
<INPUT TYPE=hidden NAME=mv_nextpage VALUE="__UI_BASE__/regen">

<table __UI_T_PROPERTIES__>
<tr>
<td colspan=2 bgcolor=__UI_C_TOPBLOCKBAR__><img src="admin/cleardot.gif" width=__UI_MAIN_WIDTH__ height=1></td>
</tr>
<tr>
<td bgcolor="__UI_C_INTBLOCK__" width="__UI_LEFT_WIDTH__" valign=top>

<input type="submit" value="Regenerate"><BR><BR>
<input type=checkbox name=ui_build_verbose> Verbose<br>
<select NAME=ui_max_build>
<option VALUE=100>100
<option VALUE=200>200
<option VALUE=500 selected>500
<option VALUE=1000>1,000
<option VALUE=2000>2,000
<option VALUE=5000>5,000
<option VALUE=10000>10,000
</select>
</td>
<td bgcolor="__UI_C_INTBLOCK__" width="__UI_RIGHT_WIDTH__">
<b>Entry page:</b><br>

[set pages][/set]
[calc]
	# Find the list of pages not defined "NoCache"
	$Values->{ui_initial_page} = $Config->{SpecialPage}{catalog};
	@pages = split /\s+/, $Tag->list_pages();
	my $check = $Config->{NoCache};
	for(@pages) {
		my $test = $_;
		do {
			$_ = '' if defined $check->{$test};
		} while ($test =~ s:(.*)/.*:$1:);
	}
	$Scratch->{pages} = join "\n", grep $_, @pages;
	return;
[/calc]

<select name="ui_initial_page">
[loop option=ui_initial_page list="[scratch pages]"]
	<option>[loop-code]
[/loop]
</select><BR><BR>
	<table>
		<tr>
			<td>
			<b>Force build of:</b><br>
			<select name="ui_force_build" multiple>
			[loop prefix=force option=ui_initial_page list="[scratch pages]"]
				<option>[force-code]
			[/loop]
			</select>
			</td>
			<td>

			<b>Never build:</b><br>
			<select name="ui_never_build" multiple>
			[loop prefix=never list="[scratch pages]"]
				<option>[never-code]
			[/loop]
			</select>
			</td>
		</tr>
	</table>
</td>
</tr>

<tr>
<td colspan=2 bgcolor=__UI_C_TOPBLOCKBAR__><img src="admin/cleardot.gif" width=__UI_MAIN_WIDTH__ height=1></td>
</tr>

</table>

</form>


<!-- ----- END REAL STUFF ----- -->

@_UI_STD_FOOTER_@
<!-- page: @@MV_PAGE@@ -->
