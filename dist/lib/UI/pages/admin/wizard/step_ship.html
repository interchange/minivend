[set page_title]Shipping Preferences[/set]
[set ui_checklist]1[/set]
[set help_name]wizard.shipping[/set]
@_UI_STD_HEAD_@

<table><tr><td width=500>
Choose which shipping method(s) you want to use.
<P>
Bear in mind Fedex and UPS only work with the US as a country of origin.
</td></tr></table>
<p>
[table-editor 
	
	left_width=180
	table_width=500
	wizard=1
	defaults=1
	bottom_buttons=1
	no_top=1
	no_bottom=1
   	row_template="[scratch row_template]"

	ui_profile="*ship"

	mv_nextpage="[either][cgi ui_nextpage][or]__UI_BASE__/wizard/step_ship_default[/either]"
	mv_prevpage="[either][cgi ui_prevpage][or]__UI_BASE__/wizard/step_tax[/either]"
	hidden.ui_return_to="__UI_BASE__/wizard/index"

	ui_wizard_fields="shipmethod"

	label.shipmethod="Shipping method(s)"
	help.shipmethod="By what method will you ship your products? More than one can be selected."
	widget.shipmethod=checkbox_left_1
	passed.shipmethod="FedEx, UPS, Flat rate"
	filter.shipmethod="checkbox"
	default.shipmethod="UPS"
]

[set ui_override_next]
	[perl]
		$Values->{shipmethod} = $CGI->{shipmethod} if $CGI->{shipmethod};
		if ($Values->{shipmethod} =~ /\bfedex\b/i) {
			$CGI->{mv_nextpage} = '__UI_BASE__/wizard/step_ship_fedex';
		}
		elsif ($Values->{shipmethod} =~ /\bups\b/i) {
			delete $Values->{fedmodes};
			$CGI->{mv_nextpage} = '__UI_BASE__/wizard/step_ship_ups';
		}
		else {
			delete $Values->{fedmodes};
			delete $Values->{upsmodes};
			$CGI->{mv_nextpage} = '__UI_BASE__/wizard/step_ship_default';
		}
		delete $Scratch->{ui_override_next};
		return;
	[/perl]
[/set]

@_UI_STD_FOOTER_@
