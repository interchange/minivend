# Copyright (C) 2000 Akopia Corp. <heins@akopia.com>

# Author: Michael J. Heins, Akopia Corp. <heins@akopia.com>

# This file is free software; you can redistribute it and/or modify it
# under the terms of the GNU General Public License as published by the
# Free Software Foundation; either version 2, or (at your option) any
# later version.

# This file is distributed in the hope that it will be
# useful, but WITHOUT ANY WARRANTY; without even the implied warranty
# of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# General Public License for more details.

# You should have received a copy of the GNU General Public License
# along with this file; see the file COPYING.  If not, write to the Free
# Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.

# Set the base for the Minimate pages
Variable MM_BASE admin

# localized strings
#ifdef UI_LOCALE_DE
#include lib/UI/locales/de_DE.cfg
#endif

#ifdef UI_LOCALE_FR
#include lib/UI/locales/fr_FR.cfg
#endif

#ifdef UI_LOCALE_IT
#include lib/UI/locales/it_IT.cfg
#endif

#ifdef UI_LOCALE_RU
#include lib/UI/locales/ru_RU.cfg
#endif


UserTag UI_initlocale Routine <<EOR
sub {
	package Vend::Config;

	sub parse_deflocparse {	
		# preserve locale information for MiniMate
		$C->{Locale_repository} = {} unless $C->{Locale_repository};
		foreach my $key (keys %$Global::Locale_repository)
		  {	
    	    $C->{Locale_repository}{"MM_$key"} = 
			         $Global::Locale_repository->{$key};
	      }	
	}
}
EOR

AddDirective MM_InitLocale deflocparse default

# instruct MiniVend to use this directory as alternative
# for searching MiniVend pages
TemplateDir lib/UI/pages

## This tag is here to initialize the imports
UserTag reconfigure Routine <<EOR
use UI::Primitive;
*ui_check_acl = \&UI::Primitive::ui_check_acl;
*ui_acl_enabled = \&UI::Primitive::ui_acl_enabled;
*get_ui_table_acl = \&UI::Primitive::get_ui_table_acl;
sub {
	UI::Primitive::rotate();
	Vend::Util::logData("$Global::ConfDir/reconfig", $CGI::script_name)
			and return "SUCCESS";
	return "FAILED";
}
EOR

# user tags
#include lib/UI/tags/*
#include lib/UI/vars/*

Message ...UI is loaded....
