# Set global defaults for UI images location
Variable UI_IMAGE_DIR /interchange/
Variable UI_IMAGE_DIR_SECURE /interchange/

# Set the base for the UI pages
Variable UI_BASE admin
Variable UI_HELP_TABLE ichelp
#Variable UI_HELP_URL   http://help.interchange.redhat.com/4.8

Variable UI_STATE_TABLE   state
Variable UI_COUNTRY_TABLE country

# This one is MV because used internally as well
Variable MV_OPTION_TABLE options

# Load individual locale settings.
# Comment this out to remove language selection box from login page.
include lib/UI/locales/*_*.cfg

# Set up for default locale
Locale en_US MV_LANG_NAME English

# instruct Interchange to use this directory as alternative
# for searching Interchange pages
TemplateDir lib/UI/pages

# This tag is here to initialize the imports
UserTag reconfigure Order table file
UserTag reconfigure Routine <<EOR
use UI::Primitive;
use Vend::Table::Editor;
*ui_check_acl = \&UI::Primitive::ui_check_acl;
*ui_acl_enabled = \&UI::Primitive::ui_acl_enabled;
*get_ui_table_acl = \&UI::Primitive::get_ui_table_acl;
sub {
	my ($table, $file) = @_;
	my $recon = $CGI::script_name;
	if($table and $file) {
		$recon .= " $table $file";
	}
	Vend::Util::logData("$Global::RunDir/reconfig", $recon)
			and return "SUCCESS";
	return "FAILED";
}
EOR

GlobalSub <<EOS
sub admin_links {
	return unless $Vend::admin;
	my $tmpd = $Vend::Cfg->{ScratchDir};
	$tmpd .= "/previews/$Vend::SessionID";
	$Vend::Cfg->{PreviewDir} = $tmpd if -d $tmpd;
	$::Variable->{ADL_SUFFIX} = $Vend::Cfg->{HTMLsuffix};
	$::Variable->{ADL_PAGE} = $::Variable->{ADL_PAGE_TEMPLATE} || <<EOF;
[page href="admin/content_editor" form="
			ui_name=[var MV_PAGE 1][var ADL_SUFFIX]
			ui_type=page
		"][loc]edit[/loc]&nbsp;[loc]page[/loc]</A>
EOF

	$::Variable->{ADL_COMPONENT} = $::Variable->{ADL_COMPONENT_TEMPLATE} || <<EOF;
[page href="admin/content_editor" form="
			ui_name=[contol component]
			ui_type=component
		"][loc]edit[/loc]&nbsp;[control component]</A>
EOF

	$::Variable->{ADL_MENU} = $::Variable->{ADL_MENU_TEMPLATE} || <<EOF;
<a class="[control link_class]"
	href="[area
			href=admin/menu_editor
			form=|
				qmenu_name=[either][control menu_name][or][var MV_PAGE 1][/either]
			|
		]">[loc]edit[/loc]&nbsp;[loc]menu[/loc]</A>
EOF
	return;

}
EOS

# user tags
include lib/UI/vars/*
Profiles lib/UI/profiles/*

Message ...UI is loaded...
